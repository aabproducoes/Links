<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Portfólio — AAB Produções</title>
  <meta name="color-scheme" content="dark light">
  <style>
    :root{
      --bg:#0b0d12;
      --panel:#0f131b;
      --muted:#97a0b0;
      --text:#e6ebf2;
      --accent:#00e0ff;
      --accent-2:#00ff87;
      --ring: 0 0 0 2px color-mix(in oklab, var(--accent) 60%, transparent),
              0 0 24px color-mix(in oklab, var(--accent) 40%, transparent);
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:radial-gradient(1200px 800px at -10% -20%, #101525 0%, var(--bg) 50%, #0a0d13 100%);
      color:var(--text); font: 14.5px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
    }
    .app{display:flex; min-height:100dvh; gap:0}
    /* Sidebar */
    .sidebar{
      width: 300px; max-width: 85vw; background: linear-gradient(180deg, #0f141e 0%, var(--panel) 100%);
      border-right:1px solid #1a2230; position:relative; box-shadow: var(--shadow);
      display:flex; flex-direction:column;
    }
    .brand{
      padding:20px 18px; border-bottom:1px solid #1a2230; position:relative;
    }
    .brand h1{
      margin:0; font-size:18px; letter-spacing:.5px; display:flex; align-items:center; gap:8px;
    }
    .badge{
      font-size:11px; padding:2px 8px; border:1px solid #1a2230; border-radius:999px; color:var(--muted)
    }
    nav{padding:10px 8px 14px 8px; overflow:auto}
    .link{
      appearance:none; width:100%; text-align:left; border:0; background:transparent; color:var(--text);
      padding:12px 14px; margin:6px; border-radius:14px; cursor:pointer; position:relative;
      outline:none; display:flex; align-items:center; gap:10px; isolation:isolate;
    }
    .link .dot{
      width:10px; height:10px; border-radius:50%; background:linear-gradient(135deg, var(--accent), var(--accent-2));
      opacity:.9; box-shadow:0 0 12px color-mix(in oklab, var(--accent) 50%, transparent);
    }
    .link .label{flex:1}
    .link .open{
      opacity:.6; font-size:12px; border:1px solid #233149; padding:2px 8px; border-radius:999px
    }
    .link:hover{background:#111826}
    .link:focus-visible{box-shadow:var(--ring)}
    .link.active{
      background:linear-gradient(180deg, #121a27, #0f1722);
      border:1px solid #203049;
      box-shadow:
        inset 0 0 0 1px rgba(0,224,255,.15),
        inset 0 0 24px rgba(0,224,255,.06),
        0 6px 22px rgba(0,0,0,.45);
    }
    .link.active::before{
      content:""; position:absolute; inset:-1px; border-radius:14px;
      pointer-events:none; z-index:-1;
      background:
        conic-gradient(from 0deg at 0% 50%, var(--accent), transparent 45%),
        conic-gradient(from 180deg at 0% 50%, var(--accent-2), transparent 45%);
      filter: blur(16px); opacity:.18;
    }
    .hint{
      margin:8px 14px 0; color:var(--muted); font-size:12px
    }

    /* Main pane */
    .main{flex:1; min-width:0; position:relative; display:flex; flex-direction:column}
    .toolbar{
      display:flex; gap:8px; align-items:center; justify-content:space-between;
      padding:10px 12px; border-bottom:1px solid #1a2230; background:linear-gradient(180deg, #0e141e, #0b1018);
    }
    .toolbar .left, .toolbar .right{display:flex; gap:8px; align-items:center}
    .btn{
      color:var(--text); background:#111826; border:1px solid #1e2a3f; padding:8px 10px; border-radius:12px; cursor:pointer;
    }
    .btn:hover{background:#0f1725}
    .btn:focus-visible{box-shadow:var(--ring); outline:none}
    .title{font-size:13px; color:var(--muted)}
    .title strong{color:var(--text)}
    .viewer{position:relative; flex:1; min-height:0}
    iframe{
      position:absolute; inset:0; width:100%; height:100%; border:0; background:#0a0f16;
    }
    .loading{
      position:absolute; inset:0; display:grid; place-items:center; pointer-events:none;
      background: radial-gradient(600px 300px at 50% -10%, rgba(0,224,255,.05), transparent 40%);
    }
    .spinner{
      width:56px; height:56px; border-radius:50%;
      border:3px solid rgba(255,255,255,.12);
      border-top-color: var(--accent);
      border-right-color: var(--accent-2);
      animation: spin 1s linear infinite;
      filter: drop-shadow(0 0 14px rgba(0,224,255,.45));
    }
    @keyframes spin{to{transform:rotate(360deg)}}
    .footer{
      padding:8px 12px; border-top:1px solid #1a2230; color:var(--muted); font-size:12px;
      background:linear-gradient(180deg, #0b1018, #0a0e15)
    }

    /* Mobile */
    .hamburger{display:none}
    @media (max-width: 860px){
      .app{flex-direction:column}
      .sidebar{width:100%; border-right:0; border-bottom:1px solid #1a2230}
      .hamburger{display:inline-flex}
      nav{display:none}
      .sidebar.open nav{display:block; max-height:60vh}
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="brand">
        <h1>
          <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
            <path fill="url(#g)" d="M12 2L2 7l10 5 10-5-10-5Zm0 7L2 4v13l10 5 10-5V4l-10 5Z"/><defs>
              <linearGradient id="g" x1="0" x2="1" y1="0" y2="1">
                <stop offset="0" stop-color="#00e0ff"/><stop offset="1" stop-color="#00ff87"/>
              </linearGradient>
            </defs>
          </svg>
          Portfólio <span class="badge">AAB</span>
        </h1>
      </div>
      <button class="btn hamburger" aria-controls="menu" aria-expanded="false" id="burger">☰ Menu</button>
      <nav id="menu" aria-label="Seções">
        <!-- Links do menu -->
        <button class="link" data-key="1" data-id="blender-projects">
          <span class="dot" aria-hidden="true"></span>
          <span class="label"><strong>Blender</strong> — Projects</span>
          <span class="open">1</span>
        </button>
        <button class="link" data-key="2" data-id="blender-animations">
          <span class="dot"></span><span class="label"><strong>Blender</strong> — Animations</span><span class="open">2</span>
        </button>
        <button class="link" data-key="3" data-id="gimp-projects">
          <span class="dot"></span><span class="label"><strong>GIMP</strong> — Projects</span><span class="open">3</span>
        </button>
        <button class="link" data-key="4" data-id="music-visualizer">
          <span class="dot"></span><span class="label">Music Player — Visualizer</span><span class="open">4</span>
        </button>
        <button class="link" data-key="5" data-id="best-shots">
          <span class="dot"></span><span class="label">Best Shots — Carousel</span><span class="open">5</span>
        </button>
        <button class="link" data-key="6" data-id="animated-background">
          <span class="dot"></span><span class="label">Animated Background</span><span class="open">6</span>
        </button>

        <div class="hint">Dicas: 1–6 para trocar • ↑/↓ navegam • Enter abre</div>
      </nav>
    </aside>

    <!-- Main -->
    <main class="main">
      <div class="toolbar">
        <div class="left">
          <span class="title">Visualizando: <strong id="currentTitle">—</strong></span>
        </div>
        <div class="right">
          <button class="btn" id="openNew">Abrir em nova aba</button>
          <button class="btn" id="copyLink">Copiar link</button>
        </div>
      </div>

      <div class="viewer">
        <div class="loading" id="loading" aria-hidden="true"><div class="spinner" role="status" aria-label="Carregando"></div></div>
        <iframe id="frame" title="Visualização do portfólio" referrerpolicy="no-referrer"></iframe>
      </div>

      <div class="footer">
        Feito com ❤ — Tema escuro com acentos ciano/verde. Problemas de exibição? Use “Abrir em nova aba”.
      </div>
    </main>
  </div>

  <script>
    // Mapeamento de páginas
    const PAGES = {
      "blender-projects": {
        url: "https://aabproducoes.github.io/Links/blender-projects.html",
        title: "Blender — Projects"
      },
      "blender-animations": {
        url: "https://aabproducoes.github.io/Links/blender-animations.html",
        title: "Blender — Animations"
      },
      "gimp-projects": {
        url: "https://aabproducoes.github.io/Links/gimp-projects.html",
        title: "GIMP — Projects"
      },
      "music-visualizer": {
        url: "https://aabproducoes.github.io/Links/music_player-visualizer.html",
        title: "Music Player — Visualizer"
      },
      "best-shots": {
        url: "https://aabproducoes.github.io/Links/best-shots-img-caroussell.html",
        title: "Best Shots — Carousel"
      },
      "animated-background": {
        url: "https://aabproducoes.github.io/Links/animated-background.html",
        title: "Animated Background"
      },
    };

    const frame = document.getElementById('frame');
    const loading = document.getElementById('loading');
    const currentTitle = document.getElementById('currentTitle');
    const openNew = document.getElementById('openNew');
    const copyLink = document.getElementById('copyLink');
    const burger = document.getElementById('burger');
    const sidebar = document.getElementById('sidebar');

    // Helpers
    const $ = (sel, ctx=document) => ctx.querySelector(sel);
    const $$ = (sel, ctx=document) => Array.from(ctx.querySelectorAll(sel));

    function setActive(id){
      $$('.link').forEach(b=>b.classList.toggle('active', b.dataset.id === id));
    }

    function loadPage(id, pushHash=true){
      const item = PAGES[id]; if(!item) return;
      // show spinner
      loading.removeAttribute('aria-hidden');
      loading.style.opacity = '1';

      // update UI
      setActive(id);
      currentTitle.textContent = item.title;
      frame.src = item.url;

      // persist + deep link
      localStorage.setItem('aab.portfolio.current', id);
      if (pushHash) history.replaceState(null, "", `#${id}`);

      // close mobile menu if open
      if (sidebar.classList.contains('open')) toggleMenu(false);
    }

    // spinner hide on load
    frame.addEventListener('load', ()=> {
      // quick fadeout
      loading.style.transition = 'opacity .35s ease';
      loading.style.opacity = '0';
      setTimeout(()=>loading.setAttribute('aria-hidden','true'), 360);
      // update document title
      const id = getCurrentId();
      if (id) document.title = `Portfólio — ${PAGES[id].title}`;
    });

    function getCurrentId(){
      const h = (location.hash || '').replace('#','').trim();
      if (PAGES[h]) return h;
      const saved = localStorage.getItem('aab.portfolio.current');
      if (PAGES[saved]) return saved;
      return 'blender-projects';
    }

    // Menu clicks
    $$('.link').forEach(btn=>{
      btn.addEventListener('click', ()=>loadPage(btn.dataset.id));
    });

    // Keyboard navigation: 1–6, arrows, Enter
    window.addEventListener('keydown', (e)=>{
      const num = Number(e.key);
      if (num>=1 && num<=6){
        const target = $(`.link[data-key="${num}"]`);
        if (target) { target.focus(); loadPage(target.dataset.id); }
        return;
      }
      const links = $$('.link');
      const idx = links.findIndex(el=>el.classList.contains('active'));
      if (['ArrowDown','j'].includes(e.key)){
        const next = links[Math.min(idx+1, links.length-1)];
        if (next){ next.focus(); loadPage(next.dataset.id); }
      } else if (['ArrowUp','k'].includes(e.key)){
        const prev = links[Math.max(idx-1, 0)];
        if (prev){ prev.focus(); loadPage(prev.dataset.id); }
      } else if (e.key === 'Enter'){
        const active = links[idx] || links[0];
        if (active) loadPage(active.dataset.id);
      }
    });

    // Toolbar buttons
    openNew.addEventListener('click', ()=>{
      const id = getCurrentId();
      window.open(PAGES[id].url, '_blank', 'noopener');
    });

    copyLink.addEventListener('click', async ()=>{
      const id = getCurrentId();
      const share = `${location.origin}${location.pathname}#${id}`;
      try{
        await navigator.clipboard.writeText(share);
        copyLink.textContent = 'Copiado!';
        setTimeout(()=>copyLink.textContent='Copiar link', 1200);
      }catch{
        prompt('Copie o link:', share);
      }
    });

    // Mobile menu
    function toggleMenu(force){
      const open = typeof force === 'boolean' ? force : !sidebar.classList.contains('open');
      sidebar.classList.toggle('open', open);
      burger.setAttribute('aria-expanded', String(open));
    }
    burger.addEventListener('click', ()=>toggleMenu());

    // Init
    window.addEventListener('hashchange', ()=>{
      const id = getCurrentId();
      loadPage(id, /*pushHash*/false);
    });

    // Primeiro load
    loadPage(getCurrentId());
  </script>
</body>
</html>
