<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="A clean, modern portfolio using a blue and black design scheme." />
  <title>Aetherial Horizon Portfolio</title>
  <!-- Font: Inter (Used for a modern, clean look) -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&display=swap" rel="stylesheet" />
  <!-- Font Awesome for Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLMD/CDQd/8D9gK+jZ+z/n+wA9r5o8r/yC/yS9LwGfB6i7fR7d/J8P0zT3L7F9g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  
  <style>
    /* ================================
       RESET AND AETHERIAL HORIZON COLORS
    ================================ */
    :root {
      /* Base Colors (Near Black, Charcoal) */
      --bg-dark: #0D1117; 
      --bg-deep-charcoal: #161B22;
      --bg-section: rgba(22, 27, 34, 0.7); /* Slightly lighter charcoal with transparency */
      --bg-sidebar: rgba(13, 17, 23, 0.85); /* Darker sidebar background */

      /* Blue Accents */
      --color-accent-vibrant: #00D4FF; /* Vibrant electric blue (Active/Hover) */
      --color-accent-muted: #007ACC; /* Muted blue (Borders, Secondary) */

      /* Text Colors */
      --color-text-primary: #F0F6FC; /* Light white/gray */
      --color-text-secondary: #93B2CC; /* Muted blue/gray */

      /* Structure/UI */
      --border-color: #30363D; /* Subtle divider/border color */
      --primary-font: 'Inter', sans-serif;
    }
    * {
      margin: 0; padding: 0; box-sizing: border-box;
      scroll-behavior: smooth;
    }
    body {
      min-height: 100vh;
      font-family: var(--primary-font), sans-serif;
      background: linear-gradient(160deg, var(--bg-dark) 0%, var(--bg-deep-charcoal) 100%);
      color: var(--color-text-primary);
      overflow-x: hidden; position: relative;
    }
    /* ==================================
       SIDEBAR
    =================================== */
    .sidebar {
      width: 280px;
      background: var(--bg-sidebar);
      backdrop-filter: blur(10px);
      color: var(--color-text-primary);
      display: flex; flex-direction: column;
      transition: width 0.3s ease;
      position: fixed; top: 0; left: 0; bottom: 0;
      border-right: 1px solid var(--border-color);
      box-shadow: 6px 0 15px rgba(0, 0, 0, 0.5);
      z-index: 1000; padding: 20px 0;
    }
    .toggle-btn {
      position: absolute; top: 15px; right: -25px;
      background: var(--color-accent-muted); color: var(--bg-dark);
      border: none; border-radius: 50%;
      width: 45px; height: 45px; cursor: pointer;
      transition: transform 0.2s, background 0.3s; font-size: 18px;
      box-shadow: 0 0 10px rgba(0, 122, 204, 0.4);
      display: flex; align-items: center; justify-content: center;
      z-index: 1100;
    }
    .toggle-btn:hover { background: var(--color-accent-vibrant); transform: scale(1.05); }
    .toggle-btn svg { transition: transform 0.3s ease; }
    .menu {
      list-style: none; padding: 60px 0 0; flex: 1;
      display: flex; flex-direction: column;
    }
    .menu li {
      transition: background 0.3s, transform 0.3s;
      margin: 0; border-radius: 0;
      border-left: 3px solid transparent;
    }
    .menu li a {
      display: flex; align-items: center;
      color: var(--color-text-secondary);
      text-decoration: none; font-size: 15px;
      font-weight: 400; padding: 15px 20px;
      transition: color 0.3s;
    }
    .menu li a i {
      font-size: 18px; width: 30px; text-align: center;
      margin-right: 10px;
    }
    .menu li:hover {
      background: rgba(0, 122, 204, 0.1);
      border-left-color: var(--color-accent-muted);
    }
    .menu li:hover a { color: var(--color-text-primary); }
    .menu li.active {
      border-left-color: var(--color-accent-vibrant);
      background: rgba(0, 212, 255, 0.08);
    }
    .menu li.active a {
      color: var(--color-accent-vibrant);
      font-weight: 500;
    }
    /* Collapsed State */
    .sidebar.closed { width: 70px; }
    .sidebar.closed .menu li a span { display: none; }
    .sidebar.closed .menu li a { justify-content: center; padding: 15px 0; }
    .sidebar.closed .menu li a i { margin-right: 0; }
    .sidebar.closed .preset-themes,
    .sidebar.closed .color-grid { display: none; }
    .sidebar.closed .language-btn { width: 45px; height: 45px; padding: 0; border-radius: 50%; }
    .sidebar.closed .language-btn span { display: none; }
    /* BUTTONS / CONTROLS */
    .controls-wrapper {
      padding: 10px 20px;
      border-top: 1px solid var(--border-color);
      margin-top: 20px;
    }
    .language-btn {
      display: flex; align-items: center; justify-content: center;
      margin: 15px auto;
      background: transparent; color: var(--color-text-secondary);
      padding: 10px 20px; border: 1px solid var(--color-accent-muted);
      border-radius: 5px; text-decoration: none;
      font-weight: 500; cursor: pointer; width: 100%;
      transition: all 0.3s ease;
    }
    .language-btn:hover {
      background: var(--color-accent-muted); color: var(--bg-dark);
      border-color: var(--color-accent-muted);
    }
    .color-grid {
      display: grid; grid-template-columns: repeat(4, 1fr);
      gap: 5px; padding: 5px 0;
    }
    .color-option {
      width: 100%; height: 25px; cursor: pointer;
      border: 2px solid transparent; border-radius: 4px;
      transition: transform 0.2s ease, border-color 0.2s ease;
    }
    .color-option:hover {
      transform: scale(1.1); border-color: var(--color-accent-vibrant);
    }
    .preset-themes h4 {
      font-size: 13px; color: var(--color-text-secondary);
      margin: 10px 0 5px; text-align: center;
    }
    .theme-btn {
      margin: 3px 0; width: 100%; border: none;
      border-radius: 5px; padding: 6px; cursor: pointer;
      font-size: 12px; font-weight: 500; transition: filter 0.3s;
      color: var(--color-text-primary);
    }
    .theme-btn:hover { filter: brightness(1.2); }
    /* MAIN CONTAINER */
    .main-container {
      margin-left: 280px; padding: 30px;
      transition: margin-left 0.3s ease;
    }
    .sidebar.closed ~ .main-container { margin-left: 70px; }
    section {
      padding: 40px 30px; margin-bottom: 40px;
      border-radius: 8px; background: var(--bg-section);
      backdrop-filter: blur(5px); opacity: 0;
      transform: translateY(20px); transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      min-height: 60vh;
      border: 1px solid var(--border-color);
    }
    section.in-view {
      opacity: 1; transform: translateY(0);
    }
    h1 {
      font-size: 32px; color: var(--color-accent-vibrant);
      margin-bottom: 20px;
      border-bottom: 2px solid var(--color-accent-muted);
      padding-bottom: 10px; font-weight: 700;
    }
    h2 {
      font-size: 24px; color: var(--color-text-secondary);
      font-weight: 400; margin-bottom: 15px;
    }
    a.main-btn {
      display: inline-flex; align-items: center;
      background: transparent;
      color: var(--color-accent-vibrant);
      padding: 10px 18px;
      border: 1px solid var(--color-accent-muted);
      border-radius: 5px;
      text-decoration: none; font-weight: 500; margin: 8px;
      font-size: 15px; transition: all 0.3s ease;
    }
    a.main-btn:hover {
      background: var(--color-accent-muted);
      color: var(--bg-dark);
      box-shadow: 0 4px 15px rgba(0, 212, 255, 0.2);
      transform: translateY(-2px);
    }
    a.main-btn:active { transform: translateY(0); }
    a.main-btn i { margin-right: 8px; font-size: 16px; }
    /* CERTIFICATES SECTION STYLES */
    .certificates-container {
      display: flex; flex-wrap: wrap; gap: 20px; margin-top: 20px;
    }
    .certificates-list {
      flex: 1 1 200px;
      border-right: 1px solid var(--border-color);
      padding-right: 15px;
    }
    .certificate-display {
      flex: 3 1 300px;
      padding-left: 15px;
    }
    .certificate-item {
      padding: 10px; margin-bottom: 8px;
      border: 1px solid var(--border-color);
      border-radius: 4px; cursor: pointer;
      transition: background 0.2s, border-color 0.2s;
      color: var(--color-text-primary);
    }
    .certificate-item:hover {
      background: var(--color-accent-muted);
      border-color: var(--color-accent-vibrant);
      color: var(--bg-dark);
    }
    .cert-nav-btn {
      background: var(--color-accent-muted);
      border: none; color: var(--bg-dark);
      padding: 8px 15px; border-radius: 4px;
      cursor: pointer; font-weight: bold;
      transition: background 0.2s;
    }
    .cert-nav-btn:hover { background: var(--color-accent-vibrant); }
    /* CLOCK */
    #clock {
      position: fixed; bottom: 20px; right: 20px;
      width: 120px; height: 50px; background: var(--bg-deep-charcoal);
      border: 1px solid var(--color-accent-muted);
      box-shadow: 0 0 15px rgba(0, 212, 255, 0.2);
      color: var(--color-accent-vibrant); font-size: 20px; font-weight: 700;
      display: flex; align-items: center; justify-content: center;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      border-radius: 6px; z-index: 999;
    }
    #clock:hover {
      transform: scale(1.05);
      box-shadow: 0 5px 20px rgba(0, 212, 255, 0.3);
    }
    /* Dynamic Content */
    .knowledge-wrapper {
      display: flex; justify-content: space-between; gap: 30px;
    }
    .knowledge-wrapper > div { flex: 1; }
    #whoImIContainer {
      padding-left: 20px; border-left: 2px solid var(--color-accent-muted);
    }
    .animated-patterns-grid .pattern-item iframe {
      width: 100%; height: 80vh; border: 1px solid var(--border-color);
      border-radius: 4px;
    }
    /* Responsive adjustments */
    @media (max-width: 900px) {
      .knowledge-wrapper { flex-direction: column; }
      #whoImIContainer { border-left: none; padding-left: 0; padding-top: 20px; border-top: 1px solid var(--border-color); }
    }
    @media (max-width: 768px) {
      .main-container { margin-left: 70px; padding: 15px; }
      .sidebar { width: 70px; }
      .sidebar:not(.closed) { width: 200px; }
      .sidebar:not(.closed) ~ .main-container { margin-left: 200px; }
      .sidebar.closed ~ .main-container { margin-left: 70px; }
      .toggle-btn { top: 15px; right: -20px; }
      .certificates-list { flex: 1 1 100%; border-right: none; padding-right: 0; }
      .certificate-display { flex: 1 1 100%; padding-left: 0; }
    }
  </style>
</head>
<body>
  <!-- SIDEBAR -->
  <div class="sidebar closed" id="sidebar">
    <button class="toggle-btn" id="toggleBtn" aria-label="Toggle Sidebar">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 010 .708L5.707 8l5.647 5.646a.5.5 0 11-.708.708l-6-6a.5.5 0 010-.708l6-6a.5.5 0 01.708 0z"/>
      </svg>
    </button>
    <ul class="menu" id="menuList" role="navigation" aria-label="Sidebar Menu">
      <li class="active"><a href="#profile" data-locale="profileTitle"><i class="fa-solid fa-user"></i><span data-locale="profileTitle">Profile</span></a></li>
      <li><a href="#social" data-locale="socialTitle"><i class="fa-solid fa-share-nodes"></i><span data-locale="socialTitle">Social</span></a></li>
      <li><a href="#projects" data-locale="projectsTitle"><i class="fa-solid fa-list-check"></i><span data-locale="projectsTitle">Projects</span></a></li>
      <li><a href="#contact" data-locale="contactTitle"><i class="fa-solid fa-paper-plane"></i><span data-locale="contactTitle">Contact</span></a></li>
      <li><a href="#certificates" data-locale="certificatesTitle"><i class="fa-solid fa-certificate"></i><span data-locale="certificatesTitle">Certificates</span></a></li>
      <li><a href="#animatedPatterns" data-locale="animatedPatternsTitle"><i class="fa-solid fa-wave-square"></i><span data-locale="animatedPatternsTitle">Animated Patterns</span></a></li>
      <li><a href="#htmlGames" data-locale="htmlGames"><i class="fa-solid fa-gamepad"></i><span data-locale="htmlGames">HTML Games</span></a></li>
      <li><a href="#mp3Visualizer" data-locale="mp3Visualizer"><i class="fa-solid fa-headphones"></i><span data-locale="mp3Visualizer">MP3 Visualizer</span></a></li>
    </ul>

    <div class="controls-wrapper">
      <button class="language-btn" id="languageBtn"><i class="fa-solid fa-globe"></i> <span>Lang: EN</span></button>
      <div class="preset-themes">
        <h4>Theme Presets</h4>
        <div style="display:flex; gap: 5px;">
          <button class="theme-btn" style="background:#007ACC; color:var(--bg-dark);" data-theme="blue-dark">Blue Dark</button>
          <button class="theme-btn" style="background:#4CAF50; color:var(--bg-dark);" data-theme="green-dark">Green Dark</button>
          <button class="theme-btn" style="background:#9E9E9E; color:var(--bg-dark);" data-theme="gray-dark">Gray Dark</button>
        </div>
      </div>
      <h4 style="margin-top: 15px;">Manual Background Color</h4>
      <div class="color-grid">
        <!-- Manual color options use the default gradient dark for consistent contrast -->
        <div class="color-option" data-color="#0D1117" style="background-color: #0D1117;"></div>
        <div class="color-option" data-color="#161B22" style="background-color: #161B22;"></div>
        <div class="color-option" data-color="#37474f" style="background-color: #37474f;"></div>
        <div class="color-option" data-color="#3e2723" style="background-color: #3e2723;"></div>
      </div>
    </div>
  </div>

  <!-- MAIN CONTAINER -->
  <div class="main-container" id="mainContainer">
    <section id="profile">
      <h1 data-locale="profileTitle">Profile</h1>
      <h2 data-locale="knowledgeListTitle">Knowledge List</h2>
      <div class="knowledge-wrapper">
        <div id="knowledgeList"></div>
        <div id="whoImIContainer"></div>
      </div>
    </section>
    <section id="social">
      <h1 data-locale="socialTitle">Social</h1>
      <div>
        <!-- Social links are valid external URLs -->
        <a href="https://www.facebook.com" target="_blank" class="main-btn"><i class="fa-brands fa-facebook"></i><span data-locale="facebook">Facebook</span></a>
        <a href="https://www.instagram.com" target="_blank" class="main-btn"><i class="fa-brands fa-instagram"></i><span data-locale="instagram">Instagram</span></a>
      </div>
    </section>
    <section id="projects">
      <h1 data-locale="projectsTitle">Projects</h1>
      <div>
        <!-- Project links are now placeholders (#) as they pointed to missing external files -->
        <a href="#" class="main-btn"><i class="fa-solid fa-cube"></i><span data-locale="blenderProjects">Blender Projects</span></a>
        <a href="#" class="main-btn"><i class="fa-solid fa-palette"></i><span data-locale="gimpProjects">Gimp Projects</span></a>
        <a href="#" class="main-btn"><i class="fa-solid fa-video"></i><span data-locale="blenderAnimations">Blender Animations</span></a>
        <a href="#" class="main-btn"><i class="fa-solid fa-wand-magic-sparkles"></i><span data-locale="animatedBackground">Animated Background</span></a>
      </div>
    </section>
    <section id="contact">
      <h1 data-locale="contactTitle">Contact</h1>
      <div>
        <!-- Contact links are valid external URLs -->
        <a href="https://wa.me/54984181968" target="_blank" class="main-btn"><i class="fa-brands fa-whatsapp"></i><span data-locale="whatsapp">WhatsApp</span></a>
        <a href="mailto:aaugusto444@gmail.com" class="main-btn"><i class="fa-solid fa-envelope"></i><span data-locale="email">Email</span></a>
      </div>
    </section>
    <!-- Certificates Section -->
    <section id="certificates">
      <h1 data-locale="certificatesTitle">Certificates</h1>
      <div class="certificates-container">
        <div id="certificatesList" class="certificates-list"></div>
        <div id="certificateDisplay" class="certificate-display">
          <p style="color:var(--color-text-secondary);">Select a certificate to display</p>
        </div>
      </div>
    </section>
    <!-- Visual Content Sections: Using accessible placeholder URLs for iframes -->
    <section id="animatedPatterns">
      <h1 data-locale="animatedPatternsTitle">Animated Patterns</h1>
      <div class="animated-patterns-grid">
        <div class="pattern-item">
          <iframe src="https://placehold.co/600x400/0D1117/007ACC?text=Animated+Pattern+Placeholder" title="Animated Background Pattern"></iframe>
          <p style="color:var(--color-text-secondary);">Animated Pattern Placeholder</p>
        </div>
      </div>
    </section>
    <section id="htmlGames">
      <h1 data-locale="htmlGames">HTML Games</h1>
      <div class="animated-patterns-grid">
        <div class="pattern-item">
          <iframe src="https://placehold.co/600x400/0D1117/007ACC?text=HTML+Game+Placeholder" title="HTML Game Example"></iframe>
          <p style="color:var(--color-text-secondary);">HTML Game Placeholder</p>
        </div>
      </div>
    </section>
    <section id="mp3Visualizer">
      <h1 data-locale="mp3Visualizer">MP3 Player Visualizer</h1>
      <div class="animated-patterns-grid">
        <div class="pattern-item">
          <iframe src="https://placehold.co/600x400/0D1117/007ACC?text=MP3+Visualizer+Placeholder" title="MP3 Visualizer Example"></iframe>
          <p style="color:var(--color-text-secondary);">MP3 Visualizer Placeholder</p>
        </div>
      </div>
    </section>
  </div>
  <!-- CLOCK -->
  <div id="clock"></div>

  <script>
    // --- MOCKED DATA FOR SELF-CONTAINED OPERATION ---
    
    // 1. Mock Knowledge List Data (Replacing KnowledgeList.txt)
    const mockKnowledgeList = [
      'Frontend Development (React, Angular, Vue) || Desenvolvimento Frontend (React, Angular, Vue)',
      'Backend Development (Node.js, Express, Python) || Desenvolvimento Backend (Node.js, Express, Python)',
      'Database Management (SQL, Firestore) || Gerenciamento de Banco de Dados (SQL, Firestore)',
      '3D Modeling (Blender) || Modelagem 3D (Blender)',
      'Graphic Design (Gimp, Photoshop) || Design Gráfico (Gimp, Photoshop)'
    ];

    // 2. Mock Who Am I Text (Replacing whoImI_en/pt.txt)
    const mockWhoImIText = {
        en: "I am a versatile digital creator and developer with expertise spanning from modern frontend frameworks to professional 3D design. My passion lies in building engaging, functional, and visually appealing applications and art assets. I focus on clean code and robust architecture.",
        pt: "Sou um criador digital e desenvolvedor versátil com experiência que abrange desde frameworks de frontend modernos até design 3D profissional. Minha paixão é construir aplicações e ativos de arte envolventes, funcionais e visualmente atraentes. Eu me concentro em código limpo e arquitetura robusta."
    };

    // 3. Mock Certificates Data (Replacing CertificadosList.txt)
    // Using widely accessible PDF samples to demonstrate functionality.
    const mockCertificatesList = [
        { fullPath: 'https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf', titlePT: 'Certificado de Programação Web', titleEN: 'Web Programming Certificate' },
        { fullPath: 'https://www.africau.edu/images/default/sample.pdf', titlePT: 'Certificado de Modelagem 3D', titleEN: '3D Modeling Certificate' },
        { fullPath: 'https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf', titlePT: 'Certificado de Análise de Dados', titleEN: 'Data Analysis Certificate' }
    ];
    // ---------------------------------------------------

    // Global variables for certificate navigation
    let certificatesArray = [];
    let currentCertificateIndex = 0;

    // TRANSLATIONS (EN / PT)
    const translations = {
      en: {
        profileTitle: 'Profile', socialTitle: 'Social', projectsTitle: 'Projects', contactTitle: 'Contact', certificatesTitle: 'Certificates',
        knowledgeListTitle: 'Knowledge List', animatedPatternsTitle: 'Animated Patterns', htmlGames: 'HTML Games', mp3Visualizer: 'MP3 Visualizer',
        facebook: 'Facebook', instagram: 'Instagram', blenderProjects: 'Blender Projects', gimpProjects: 'Gimp Projects', blenderAnimations: 'Blender Animations',
        animatedBackground: 'Animated Background', whatsapp: 'WhatsApp', email: 'Email'
      },
      pt: {
        profileTitle: 'Perfil', socialTitle: 'Social', projectsTitle: 'Projetos', contactTitle: 'Contato', certificatesTitle: 'Certificados',
        knowledgeListTitle: 'Lista de Conhecimento', animatedPatternsTitle: 'Padrões Animados', htmlGames: 'Jogos HTML', mp3Visualizer: 'Visualizador MP3',
        facebook: 'Facebook', instagram: 'Instagram', blenderProjects: 'Projetos Blender', gimpProjects: 'Projetos Gimp', blenderAnimations: 'Animações Blender',
        animatedBackground: 'Fundo Animado', whatsapp: 'WhatsApp', email: 'Email'
      }
    };
    let currentLanguage = 'en';

    // THEME PRESETS (Updated for the blue/black design)
    const themePresets = {
      'blue-dark': {
        '--bg-dark': '#0D1117',
        '--bg-deep-charcoal': '#161B22',
        '--color-accent-vibrant': '#00D4FF',
        '--color-accent-muted': '#007ACC',
        '--color-text-primary': '#F0F6FC',
      },
      'green-dark': {
        '--bg-dark': '#101614',
        '--bg-deep-charcoal': '#1C2720',
        '--color-accent-vibrant': '#4CAF50',
        '--color-accent-muted': '#00695C',
        '--color-text-primary': '#F0F6FC',
      },
      'gray-dark': {
        '--bg-dark': '#1E1E1E',
        '--bg-deep-charcoal': '#2D2D2D',
        '--color-accent-vibrant': '#FFFFFF',
        '--color-accent-muted': '#9E9E9E',
        '--color-text-primary': '#E0E0E0',
      }
    };

    // Sidebar toggle function
    const toggleBtn = document.getElementById('toggleBtn');
    const sidebar = document.getElementById('sidebar');

    function updateMenuItems() {
        const isClosed = sidebar.classList.contains('closed');
        document.querySelectorAll('#menuList li a').forEach(a => {
            const span = a.querySelector('span');
            if (span) {
                span.style.display = isClosed ? 'none' : 'inline';
            }
        });
        const langSpan = languageBtn.querySelector('span');
        if (langSpan) langSpan.style.display = isClosed ? 'none' : 'inline';
    }

    function toggleSidebar() {
      sidebar.classList.toggle('closed');
      const isClosed = sidebar.classList.contains('closed');
      
      const newWidth = isClosed ? '70px' : '280px';
      const newMargin = isClosed ? '70px' : '280px';

      sidebar.style.width = newWidth;
      document.getElementById('mainContainer').style.marginLeft = newMargin;
      
      const svgIcon = toggleBtn.querySelector('svg');
      svgIcon.style.transform = isClosed ? 'rotate(180deg)' : 'rotate(0deg)';

      updateMenuItems();
    }
    toggleBtn.addEventListener('click', toggleSidebar);

    // Initial check for mobile to ensure collapsed state
    if (window.innerWidth < 768) {
        sidebar.classList.add('closed');
        document.getElementById('mainContainer').style.marginLeft = '70px';
    }
    
    // Mobile: Collapse sidebar after menu click
    document.querySelectorAll('#menuList li a').forEach(a => {
      a.addEventListener('click', () => {
        if (window.innerWidth < 768 && !sidebar.classList.contains('closed')) {
          toggleSidebar();
        }
      });
    });

    // Language Toggle & Update
    const languageBtn = document.getElementById('languageBtn');
    languageBtn.addEventListener('click', async () => {
      currentLanguage = (currentLanguage === 'en') ? 'pt' : 'en';
      updateLanguage();
      // Re-run population functions to update translated content
      populateKnowledgeList();
      populateWhoImI();
      populateCertificatesList(); 
      // If a certificate is currently displayed, re-render it with the new title
      if (document.getElementById('certificateDisplay').querySelector('iframe')) {
        displayCertificateAtIndex(currentCertificateIndex, false);
      }
    });

    function updateLanguage() {
      const langSpan = languageBtn.querySelector('span');
      if (langSpan) langSpan.textContent = `Lang: ${currentLanguage.toUpperCase()}`;
      
      // Update all elements with data-locale attribute
      document.querySelectorAll('[data-locale]').forEach(el => {
        const key = el.getAttribute('data-locale');
        if (translations[currentLanguage][key]) {
          // Update the text content of the element itself (for h1/h2/span)
          el.textContent = translations[currentLanguage][key];
        }
      });
    }

    // Load Knowledge List (Using Mock Data)
    function populateKnowledgeList() {
      const knowledgeListDiv = document.getElementById('knowledgeList');
      knowledgeListDiv.innerHTML = '';
      
      mockKnowledgeList.forEach(line => {
        // Line format: English || Portuguese
        const parts = line.split('||').map(p => p.trim());
        const englishText = parts[0] || line;
        const portugueseText = parts[1] || line;
        
        const p = document.createElement('p');
        p.style.marginBottom = '8px';
        p.style.color = 'var(--color-text-secondary)';
        p.textContent = (currentLanguage === 'en') ? englishText : portugueseText;
        knowledgeListDiv.appendChild(p);
      });
    }

    // Load "Who Am I" text (Using Mock Data)
    function populateWhoImI() {
      const whoImIContainer = document.getElementById('whoImIContainer');
      const text = mockWhoImIText[currentLanguage];
      whoImIContainer.textContent = text || "Content unavailable.";
      whoImIContainer.style.color = 'var(--color-text-primary)';
      whoImIContainer.style.lineHeight = '1.6';
    }

    // Fetch Certificates List (Using Mock Data)
    function fetchCertificatesList() {
      // Mock data is already in the required format, just return it
      return mockCertificatesList.map(cert => {
        let finalUrl = cert.fullPath;
        if (!cert.fullPath.includes('#')) {
            finalUrl = cert.fullPath + '#page=1';
        }
        return {
            fullPath: finalUrl,
            pdfName: cert.fullPath.substring(cert.fullPath.lastIndexOf('/') + 1),
            titlePT: cert.titlePT,
            titleEN: cert.titleEN
        };
      });
    }

    // Create a list of certificate titles; on click, display the certificate in full view.
    function populateCertificatesList() {
      const listContainer = document.getElementById('certificatesList');
      listContainer.style.display = 'block'; 
      listContainer.innerHTML = '';
      
      const list = fetchCertificatesList();
      certificatesArray = list; // Store globally for navigation

      if (list.length === 0) {
        listContainer.innerHTML = `<p style="color: var(--color-text-secondary);">No certificates found or failed to load.</p>`;
        return;
      }
      
      list.forEach((cert, index) => {
        if (cert.fullPath) {
          const listItem = document.createElement('div');
          listItem.classList.add('certificate-item');
          const title = currentLanguage === 'en' ? cert.titleEN : cert.titlePT;
          listItem.textContent = title;
          listItem.addEventListener('click', function() {
            displayCertificateAtIndex(index);
          });
          listContainer.appendChild(listItem);
        }
      });
      // Reset display container if list is being shown
      const displayContainer = document.getElementById('certificateDisplay');
      if (displayContainer.querySelector('iframe') === null) {
          displayContainer.innerHTML = `<p style="color:var(--color-text-secondary);">Select a certificate to display</p>`;
      }
    }

    // Display the selected certificate in full view with header and navigation arrows.
    function displayCertificateAtIndex(index, hideList = true) {
      if (!certificatesArray.length) return;

      currentCertificateIndex = index;
      const cert = certificatesArray[index];
      const title = currentLanguage === 'en' ? cert.titleEN : cert.titlePT;
      
      const listContainer = document.getElementById('certificatesList');
      const displayContainer = document.getElementById('certificateDisplay');

      if (hideList) {
        // Only hide the list if this is the initial click from the list view
        listContainer.style.display = 'none';
        displayContainer.style.flex = '1 0 100%';
        displayContainer.style.paddingLeft = '0'; // Use full width
      }

      displayContainer.innerHTML = ''; // Clear previous content
      
      // 1. Create header container with navigation
      const headerDiv = document.createElement('div');
      headerDiv.style.display = 'flex';
      headerDiv.style.alignItems = 'center';
      headerDiv.style.justifyContent = 'space-between';
      headerDiv.style.marginBottom = '15px';
      
      // Previous button
      const prevButton = document.createElement('button');
      prevButton.classList.add('cert-nav-btn');
      prevButton.textContent = '← Prev';
      prevButton.addEventListener('click', function() {
        let newIndex = currentCertificateIndex - 1;
        if (newIndex < 0) newIndex = certificatesArray.length - 1;
        displayCertificateAtIndex(newIndex, false);
      });
      
      // Title element
      const titleElem = document.createElement('div');
      titleElem.textContent = title;
      titleElem.style.flex = '1';
      titleElem.style.textAlign = 'center';
      titleElem.style.fontWeight = '500';
      titleElem.style.color = 'var(--color-accent-vibrant)';
      
      // Next button
      const nextButton = document.createElement('button');
      nextButton.classList.add('cert-nav-btn');
      nextButton.textContent = 'Next →';
      nextButton.addEventListener('click', function() {
        let newIndex = currentCertificateIndex + 1;
        if (newIndex >= certificatesArray.length) newIndex = 0;
        displayCertificateAtIndex(newIndex, false);
      });
      
      // Back to list button
      const backButton = document.createElement('button');
      backButton.classList.add('cert-nav-btn');
      backButton.textContent = 'Back to List';
      backButton.style.marginTop = '15px';
      backButton.style.width = '100%';
      backButton.addEventListener('click', function() {
        listContainer.style.display = 'block';
        displayContainer.innerHTML = `<p style="color:var(--color-text-secondary);">Select a certificate to display</p>`;
        displayContainer.style.flex = '3 1 300px';
        displayContainer.style.paddingLeft = '15px';
      });
      
      headerDiv.appendChild(prevButton);
      headerDiv.appendChild(titleElem);
      headerDiv.appendChild(nextButton);
      
      displayContainer.appendChild(headerDiv);
      
      // 2. Create the iframe for the certificate PDF
      let url = cert.fullPath;
      if (!url.includes('toolbar=0')) {
        url = url + (url.includes('#') ? '&' : '#') + 'toolbar=0&navpanes=0';
      }
      
      const iframe = document.createElement('iframe');
      iframe.src = url;
      iframe.setAttribute('loading', 'lazy');
      iframe.style.width = '100%';
      iframe.style.height = '80vh';
      iframe.style.border = '1px solid var(--border-color)';
      iframe.style.borderRadius = '4px';

      displayContainer.appendChild(iframe);
      displayContainer.appendChild(backButton);
    }

    // CLOCK
    function updateClock() {
      const now = new Date();
      let hours = now.getHours();
      let minutes = now.getMinutes();
      let seconds = now.getSeconds();
      hours = hours < 10 ? "0" + hours : hours;
      minutes = minutes < 10 ? "0" + minutes : minutes;
      seconds = seconds < 10 ? "0" + seconds : seconds;
      document.getElementById("clock").textContent = hours + ":" + minutes + ":" + seconds;
    }
    setInterval(updateClock, 1000);
    updateClock();

    // Change background color (grid)
    const gradientDark = getComputedStyle(document.documentElement)
      .getPropertyValue('--bg-deep-charcoal').trim();
    document.querySelectorAll('.color-option').forEach(option => {
      option.addEventListener('click', function () {
        const color = this.getAttribute('data-color');
        document.body.style.background = `linear-gradient(160deg, ${color} 0%, ${gradientDark} 100%)`;
      });
    });

    // Apply theme preset
    document.querySelectorAll('.theme-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const themeName = btn.getAttribute('data-theme');
        const selectedTheme = themePresets[themeName];
        if (!selectedTheme) return;
        
        // Apply theme colors to CSS variables
        for (let varName in selectedTheme) {
          document.documentElement.style.setProperty(varName, selectedTheme[varName]);
        }
        
        // Re-apply background gradient using the new variables
        document.body.style.background = `linear-gradient(160deg, ${selectedTheme['--bg-dark']} 0%, ${selectedTheme['--bg-deep-charcoal']} 100%)`;
      });
    });

    // SCROLL SPY
    const sections = document.querySelectorAll('section');
    const navLi = document.querySelectorAll('.menu li');
    const observerOptions = { threshold: 0.2 };
    
    // Intersection Observer for the section fade-in animation
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('in-view');
        }
      });
    }, observerOptions);
    sections.forEach(section => observer.observe(section));

    // Scroll listener for the active menu item
    function activateMenuOnScroll() {
      let currentSection = '';
      const offset = 120; // Adjusted for fixed header offset
      
      sections.forEach(section => {
        const sectionTop = section.offsetTop - offset;
        const sectionHeight = section.clientHeight;
        
        if (window.pageYOffset >= sectionTop && window.pageYOffset < (sectionTop + sectionHeight)) {
          currentSection = section.getAttribute('id');
        }
      });

      // Handle hitting the very bottom of the page
      if (window.innerHeight + window.pageYOffset >= document.body.offsetHeight - 5) {
        currentSection = sections[sections.length - 1].getAttribute('id');
      }

      navLi.forEach(li => {
        li.classList.remove('active');
        const a = li.querySelector('a');
        if (a && a.getAttribute('href') === `#${currentSection}`) {
          li.classList.add('active');
        }
      });
    }
    window.addEventListener('scroll', activateMenuOnScroll);

    // INITIALIZATION
    document.addEventListener('DOMContentLoaded', () => {
      // Set initial state for the closed sidebar elements
      updateMenuItems(); 
      
      // Load and update content (using mock data)
      updateLanguage();
      populateKnowledgeList();
      populateWhoImI();
      populateCertificatesList();
      
      // Set initial scroll state
      activateMenuOnScroll();
    });
  </script>
</body>
</html>
